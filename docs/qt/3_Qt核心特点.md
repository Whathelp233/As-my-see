# Qtæ ¸å¿ƒç‰¹ç‚¹
> æ›´æ–°æ—¶é—´: 2026å¹´02æœˆ27æ—¥

# å…ƒå¯¹è±¡ç³»ç»Ÿ

> Qtå¯¹æ ‡å‡†C++è¿›è¡Œäº†æ‰©å±•ï¼Œå¼•å…¥äº†ä¸€äº›æ–°çš„æ¦‚å¿µã€‚
>
> å…ƒå¯¹è±¡ç¼–è¯‘å™¨(MOC)æ˜¯ä¸€ä¸ªåŸŸå¤„ç†å™¨ï¼Œå…ˆå°†Qtçš„ç‰¹æ€§ç¨‹åºè½¬åŒ–ä¸ºæ ‡å‡†C++ç¨‹åºï¼Œå†ç»™C++ç¼–è¯‘å™¨ç¼–è¯‘ã€‚

ä½¿ç”¨ä¿¡å·ä¸æ§½æœºåˆ¶ï¼Œåªæœ‰æ·»åŠ ==Q_OBJECT==å®ï¼Œmocæ‰èƒ½å¯¹ç±»é‡Œé¢çš„ä¿¡å·è¿›è¡Œé¢„å¤„ç†ã€‚

æ–°å¢çš„æœºåˆ¶ï¼šä¿¡å·ä¸æ§½ï¼Œå±æ€§ç³»ç»Ÿï¼ŒåŠ¨æ€ç±»å‹è½¬æ¢



**å…ƒå¯¹è±¡ç³»ç»Ÿ**

- QObjectç±»æ˜¯æ‰€æœ‰å…ƒå¯¹è±¡ç³»ç»Ÿçš„ç±»çš„åŸºç±»
- åœ¨ä¸€ä¸ªç±»çš„privateéƒ¨åˆ†ä½¿ç”¨Q_OBJECTå®
- mocä¸ºæ¯ä¸ªobjectå­ç±»æä¾›äº†å¿…è¦ä»£ç 

![2022-08-05 10-23-51 çš„å±å¹•æˆªå›¾](images/3_Qtæ ¸å¿ƒç‰¹ç‚¹/2022-08-05 10-23-51 çš„å±å¹•æˆªå›¾.png)

```c
timer->inherits("xxx")   //åˆ¤æ–­æ˜¯å¦æ˜¯xxxç±»æˆ–å…¶å­ç±»
```





![2022-08-05 10-28-52 çš„å±å¹•æˆªå›¾](images/3_Qtæ ¸å¿ƒç‰¹ç‚¹/2022-08-05 10-28-52 çš„å±å¹•æˆªå›¾.png)

```c
QObject -> QWidget -> QMyWidget
å…ˆç”¨åŸºç±»æŒ‡é’ˆå˜é‡æŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿç±»æŒ‡é’ˆï¼Œæ­¤æ—¶åŸºç±»æŒ‡é’ˆåªèƒ½è·å–è‡ªå·±åŸºç±»çš„éƒ¨åˆ†
é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œèµ‹å€¼ç»™ä¸€çº§æ´¾ç”Ÿç±»QWidgetï¼Œæ­¤æ—¶èƒ½è®¿é—®QWidgetéƒ¨åˆ†
å†ç”¨QMyWidgetï¼ŒåŒç†
    
//æ³¨æ„å¦‚æœåˆè½¬æ¢ä¸ºQLabelï¼Œä¸ä¼šæŠ¥é”™ä½†æ˜¯å†…å®¹ä¸ºNULL
```





# å±æ€§ç³»ç»Ÿ

> ==Q_PROPERTY==å®å®šä¹‰äº†ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºtypeï¼Œåç§°ä¸ºnameçš„å±æ€§
>
> æˆ‘ä»¬è‡ªå·±æ´¾ç”Ÿç±»çš„æ—¶å€™å¯ä»¥å‘ç±»åŠ å…¥å‡½æ•°

![2022-08-05 10-37-04 çš„å±å¹•æˆªå›¾](Qtæ ¸å¿ƒç‰¹ç‚¹.assets/2022-08-05 10-37-04 çš„å±å¹•æˆªå›¾.png)

```c
ä¸Šæ–‡
    []æŒ‡å†…å®¹ä¸ºå¯é€‰
    | æŒ‡æˆ–(or)
```



ä¸¾ä¾‹ï¼š

 ```c++
 class QMyWidget: public QWidget
 {
     Q_OBJECT
         Q_PROPERTY(bool focus READ hasFocus)   //è¿”å›å€¼boolï¼Œå®åå­—å«focusæœ‰ä¸€ä¸ªhasFocuså‡½æ•°ï¼Œè¿™äº›å‡½æ•°å†…å®¹æ˜¯è‡ªå·±å†™çš„
         Q_PROPERTY(bool enabled READ isEnabled WRITE setEnabled)
         Q_PROPERTY(Qcursor cursor READ cursor WRITE setCursor RESET unsetCursor)
 }
 ```



![2022-08-05 10-44-50 çš„å±å¹•æˆªå›¾](Qtæ ¸å¿ƒç‰¹ç‚¹.assets/2022-08-05 10-44-50 çš„å±å¹•æˆªå›¾.png)

```c
object->property("flat")è°ƒç”¨ä¸€ä¸ªå®åˆ¤æ–­å±æ€§ ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰å±æ€§flat
```



**ç±»çš„é™„åŠ ä¿¡æ¯**

![2022-08-05 10-47-43 çš„å±å¹•æˆªå›¾](Qtæ ¸å¿ƒç‰¹ç‚¹.assets/2022-08-05 10-47-43 çš„å±å¹•æˆªå›¾.png)

```c
é€šè¿‡æ§åˆ¶å°è¾“å‡º
    classinfo(0)è¡¨ç¤ºç¬¬ä¸€é¡¹ï¼Œä¾‹å¦‚"author"
```







# ä¿¡å·ä¸æ§½

> ä¿¡å·æ§½çš„ä¼˜ç‚¹ï¼šæ¾æ•£è€¦åˆï¼Œä¿¡å·å‘é€ä¸æ¥å—æœ¬èº«æ²¡æœ‰å…³è”ï¼Œé€šè¿‡connectè€¦åˆåœ¨ä¸€èµ·ã€‚ä¸€ä¸ªä¿¡å·å¯ä»¥è¿æ¥å¤šä¸ªæ§½å‡½æ•°ï¼Œå¤šä¸ªä¿¡å·å¯ä»¥è¿æ¥å¤šä¸ªæ§½å‡½æ•°ï¼Œä¿¡å·ä¸æ§½çš„å‚æ•°å¿…é¡»ä¸€ä¸€å¯¹åº”ã€‚
>
> ==ä¿¡å·çš„å‚æ•°å¯ä»¥å¤šäºæ§½çš„å‚æ•°ï¼Œä¸è¿‡ç±»å‹è¦ä¸€ä¸€å¯¹åº”==

> åŸºæœ¬æ ¼å¼ï¼š
>
> connect(ä¿¡å·å‘é€è€…ï¼Œå‘é€çš„å…·ä½“ä¿¡å·(å‡½æ•°çš„åœ°å€)ï¼Œä¿¡å·çš„æ¥å—è€…ï¼Œä¿¡å·çš„å¤„ç†(æ§½))ï¼›

![2022-08-12 21-40-40 çš„å±å¹•æˆªå›¾](./3_Qtæ ¸å¿ƒç‰¹ç‚¹.assets/2022-08-12 21-40-40 çš„å±å¹•æˆªå›¾.png)



![2022-08-05 11-38-46 çš„å±å¹•æˆªå›¾](Qtæ ¸å¿ƒç‰¹ç‚¹.assets/2022-08-05 11-38-46 çš„å±å¹•æˆªå›¾.png)

```c
å›¾ä¸Šæœ‰ä¸¤ç§conncetå½¢å¼ï¼ŒåŒºåˆ«å¦‚æ³¨é‡Šæ‰€ç¤º
```



> å¸¸è§çš„æŒ‰é’®è§¦å‘ä¿¡å·ï¼š
>
> ```c
> pressed();
> released();
> clicked();
> toggled(bool);
> ```
>
> å½“é¼ æ ‡[å…‰æ ‡](https://so.csdn.net/so/search?q=å…‰æ ‡&spm=1001.2101.3001.7020)åœ¨æŒ‰é’®ä¸Šæ—¶ï¼Œé¼ æ ‡å·¦é”®è¢«æŒ‰ä¸‹æ—¶ï¼Œpressed()è¢«å‘é€ï¼›å½“é¼ æ ‡å·¦é”®è¢«é‡Šæ”¾æ—¶ï¼Œreleased()è¢«å‘é€ï¼›
>
> toggle ç±»ä¼¼å¼€å…³ã€‚ å…·æœ‰2ä¸ªçŠ¶æ€ï¼Œæ‰“å¼€/å…³é—­ã€‚  ä½¿ç”¨è¿™ä¸ªä¿¡å·ï¼Œæ˜¯åœ¨è¿™2ä¸ªçŠ¶æ€ä¹‹é—´åˆ‡æ¢ã€‚checkableæŒ‰çº½æˆ–æ˜¯å›¾æ ‡çš„æ§½å‡½æ•°åº”è¯¥ç”¨toggled()äº‹ä»¶æ¥æ¿€æ´»



å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±äºéƒ¨åˆ†å¯¹è±¡çš„ä¿¡å·ä¸æ§½æ˜¯æ¥è‡ªäºçˆ¶ç±»çš„ï¼Œæ‰€ä»¥åœ¨connect()å‡½æ•°ä¸­æ—¢å¯ä»¥ç”¨å¯¹è±¡çš„å‘½åç©ºé—´ï¼Œä¹Ÿå¯ä»¥ç”¨å¯¹è±¡çš„çˆ¶ç±»çš„å‘½åç©ºé—´

> åŸå› æ˜¯å‡½æ•°æ˜¯évirtualå‡½æ•°ï¼Œé™æ€è”ç¼–ï¼Œçˆ¶ç±»å­ç±»å…±ç”¨ä¸€ä¸ªå‡½æ•°åœ°å€

```c
//äºŒè€…ç­‰ä»·
connect(myBtn, &MyPushButton::clicked, this, &myWidget::close);
connect(myBtn, &QPushButton::clicked, this, &QWidget::close);
```





**æœ€åä¸€ä¸ªå‚æ•°**

![2022-08-05 11-41-13 çš„å±å¹•æˆªå›¾](Qtæ ¸å¿ƒç‰¹ç‚¹.assets/2022-08-05 11-41-13 çš„å±å¹•æˆªå›¾.png)

```c
connect()çš„æœ€åä¸€ä¸ªå‚æ•°å¯ä»¥ç¼ºçœï¼Œæ˜¯æœ‰å…³äºæ§½ä»€ä¹ˆæ—¶å€™æ‰§è¡Œçš„
```



**è·å–æ§½å‡½æ•°å‘å°„è€…çš„æŒ‡é’ˆ**

```c++
QSpinBox *spinbox = qobject_cast<QSpinBox*>(sender());
```



# è‡ªå®šä¹‰ä¿¡å·

> ä¿¡å·ä¸æ§½æ˜¯QObjectç±»æœºåˆ¶ï¼Œæ‰€ä»¥éœ€è¦å¯¹QObiectç±»è¿›è¡Œæ´¾ç”Ÿ
>
> è‡ªå®šä¹‰ä¿¡å·å†™åœ¨ç±»çš„signalsåº•ä¸‹ï¼Œæ§½å‡½æ•°å†™åœ¨public slotsä¸‹(é«˜çº§qtç‰ˆæœ¬ä¸éœ€è¦)

![2022-08-05 11-45-19 çš„å±å¹•æˆªå›¾](Qtæ ¸å¿ƒç‰¹ç‚¹.assets/2022-08-05 11-45-19 çš„å±å¹•æˆªå›¾.png)

```c
intAge()ï¼›    //è§¦å‘åæ‰§è¡Œçš„å‡½æ•°ï¼Œemitå‘é€ä¿¡å·
ageChanged(); //æ˜¯ä¿¡å·å‡½æ•°ï¼Œæ— éœ€å®ç°ï¼Œæ‰§è¡Œåå¯¹å¤–å‘å¸ƒ
```

**signal**

- signalsä¿¡å·æ²¡æœ‰è¿”å›å€¼(void)
- åªéœ€è¦ç”³æ˜ï¼Œä¸éœ€è¦å®šä¹‰
- å¯ä»¥æœ‰å‚æ•°ï¼Œæ”¯æŒé‡è½½



**slots**

- è¿”å›å€¼voidï¼Œéœ€è¦ç”³æ˜ï¼Œéœ€è¦å®šä¹‰
- å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥é‡è½½



**ä»£ç ä¸²**

```c++
//ç±»éƒ¨åˆ†
class Student : public QObject
{
    Q_OBJECT
public:
    explicit Student(QObject *parent = nullptr);

signals:

public slots:
    void treat();  //è¿™é‡Œ

};

class Teacher : public QObject
{
    Q_OBJECT
public:
    explicit Teacher(QObject *parent = nullptr);

signals:
    void hungry(); //ä¿¡å·

};
```



```c
//ä¸ºæ´¾ç”Ÿç±»Studentçš„æŒ‡é’ˆç”³è¯·ç©ºé—´ï¼Œä½¿ç”¨this->æ¥ç¡®ä¿åŠ å…¥å¯¹è±¡æ ‘
this->student = new Student(this);
```

```c
//è§¦å‘ä¿¡å·
emit teacher->hungry();
	//emitæ˜¯ä¸€ä¸ªå®#define emitï¼Œå®ƒæ²¡åšä»€ä¹ˆäº‹ï¼Œåšæ ‡è®°ç”¨
```



è¿æ¥

```c
    //å¿…é¡»æ˜¯ç±»ä¸‹çš„&Widget::closeWinSlotï¼Œè€Œä¸æ˜¯å¯¹è±¡ä¸‹çš„&this->closeWinSlot
    connect(this,&Widget::closeWinSlot,this,&Widget::close_window);
```







# ä¿¡å·é‡è½½

> ä¿¡å·é‡è½½åï¼Œæ§½å‡½æ•°æ— æ³•çŸ¥æ™“åˆ°åº•è¦æ¥æ”¶å“ªä¸€ä¸ªä¿¡å·
>
> è§£å†³åŠæ³•:

åªéœ€å°†MainWindow.cppä¸­çš„æ¥æ”¶ä¿¡å·é‚£ä¸€æ­¥æ”¹ä¸€ä¸‹å°±å¥½äº†ã€‚

```c
 //é”™è¯¯çš„å†™æ³•
 connect(this,&MainWindow::mysignal,this,&MainWindow::myslot3);  //æ— å‚
 connect(this,&MainWindow::mysignal,this,&MainWindow::myslot2);  //æœ‰å‚
```

æ­£ç¡®æ–¹æ³•æ˜¯ä½¿ç”¨**å‡½æ•°æŒ‡é’ˆ**æŒ‡å‘ä¿¡å·ã€‚

```c
 //æ— å‚
 void (MainWindow::*mysignalone)() = &MainWindow::mysignal;
 connect(this,mysignalone,this,&MainWindow::myslot3);

 //æœ‰å‚
 void (MainWindow::*mysignaltwo)(QString) = &MainWindow::mysignal;
 connect(this,mysignaltwo,this,&MainWindow::myslot2);
```

void (ä½œç”¨åŸŸ::*å‡½æ•°æŒ‡é’ˆåç§°)(å‚æ•°) = &æ§ä»¶ç±»å::ä¿¡å·åç§°;

ä½œç”¨åŸŸé€šå¸¸å°±æ˜¯æ§ä»¶ç±»å



**å¯ä»¥ç”¨QT4ç‰ˆæœ¬ä¹‹å‰çš„å†™æ³•ï¼Œè¿™ç§å†™æ³•ç›´è§‚ä½†æ˜¯å¯è¯»æ€§è¾ƒä½ä¸”æ²¡æœ‰è‡ªæ£€(ä¸åšç±»å‹æ£€æµ‹ï¼Œä¿¡å·ä¸æ§½å®¹æ˜“å†™é”™)**

> åŸå› åœ¨ä¸SIGNALä¸SLOTåªæ˜¯æŠŠæ‹¬å·å†…çš„å­—ç¬¦è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç„¶åå»å¯»æ‰¾å‡½æ•°

```c
connect(this,SIGNAL(mysignal),this,SLOT(myslot3));//è€å¼å†™æ³•
connect(this,SIGNAL(mysignal(QString)),this,SLOT(myslot3(QString)));
```



è¿™ç§æƒ…å†µä¸‹æ³¨æ„ä½œç”¨åŸŸï¼Œå¯¹connectçš„1ï¼Œ3å‚æ•°è¦æ­£ç¡®

```c
//æˆåŠŸç¤ºä¾‹
//connect(tea, hungry1, stu, &Student::treat);
    connect(this->tea, SIGNAL(hungry()), this->stu, SLOT(treat()));//æ— å‚ä¹Ÿè¦åŠ æ‹¬å·
    connect(this->tea, SIGNAL(hungry(QString)), this->stu, SLOT(treat(QString)));
```



# æ–­å¼€ä¿¡å·è¿æ¥

> é€šè¿‡connectå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿æ¥ä¿¡å·ä¸æ§½ï¼Œç›¸åº”çš„æˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿæ–­å¼€æŒ‡å®šçš„ä¿¡å·ä¸æ§½çš„è¿æ¥

```c++
connect(this,mysignalone,this,&MainWindow::myslot3);

disconnect(this,mysignalone,this,&MainWindow::myslot3);
```

ä¹‹åmysignaloneä¿¡å·çš„å‘å°„ä¸ä¼šå½±å“åˆ°myslot3





# å®ä¾‹

# å¹´é¾„å¢é•¿

> å»ºç«‹æ–°é¡¹ç›®ï¼Œæ’å…¥ç”±QObjectæ´¾ç”Ÿè€Œå‡ºçš„QPersonç±»ã€‚

![2022-08-05 16-41-08 çš„å±å¹•æˆªå›¾](Qtæ ¸å¿ƒç‰¹ç‚¹.assets/2022-08-05 16-41-08 çš„å±å¹•æˆªå›¾.png)

---

## ğŸ“š æ‰©å±•é˜…è¯»

### å®˜æ–¹æ–‡æ¡£
- [ç›¸å…³å®˜æ–¹æ–‡æ¡£é“¾æ¥]()

### å­¦ä¹ èµ„æº
- [æ¨èæ•™ç¨‹]()
- [ç¤ºä¾‹ä»£ç ]()

### å¸¸è§é—®é¢˜
1. **é—®é¢˜æè¿°**
   è§£å†³æ–¹æ¡ˆ

## ğŸ› ï¸ å®è·µå»ºè®®

1. **å­¦ä¹ è·¯å¾„**
2. **å®è·µé¡¹ç›®**
3. **è°ƒè¯•æŠ€å·§**

> æœ€åæ›´æ–°: 2026-02-27 | ç”±OpenClawä¼˜åŒ–

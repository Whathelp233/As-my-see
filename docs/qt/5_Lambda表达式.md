# Lambdaè¡¨è¾¾å¼
> æ›´æ–°æ—¶é—´: 2026å¹´02æœˆ27æ—¥

>  lambdaè¡¨è¾¾å¼ï¼ˆä¹Ÿç§°ä¸ºlambdaå‡½æ•°ï¼‰æ˜¯åœ¨è°ƒç”¨æˆ–ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’çš„ä½ç½®å¤„å®šä¹‰åŒ¿åå‡½æ•°å¯¹è±¡çš„ä¾¿æ·æ–¹æ³•ã€‚é€šå¸¸ï¼Œlambdaç”¨äºå°è£…ä¼ é€’ç»™ç®—æ³•æˆ–å¼‚æ­¥æ–¹æ³•çš„å‡ è¡Œä»£ç  ã€‚
>
> lambdaçš„å·¥ä½œåŸç†æ˜¯ç¼–è¯‘å™¨ä¼šæŠŠä¸€ä¸ªLambdaè¡¨è¾¾å¼ç”Ÿæˆä¸€ä¸ªåŒ¿åç±»çš„**åŒ¿åå¯¹è±¡**ï¼Œå¹¶åœ¨ç±»ä¸­**é‡è½½å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦**ï¼Œå®ç°äº†ä¸€ä¸ª`operator()`æ–¹æ³•ã€‚

```cpp
//ä¸€ä¸ªç®€å•çš„å®ä¾‹
#include <algorithm>
#include <cmath>

void abssort(float* x, unsigned n) {
    std::sort(x, x + n,
        // Lambda expression begins
        [](float a, float b) {
            return (std::abs(a) < std::abs(b));
        } // end of lambda expression
    );
}
```

åœ¨ä¸Šé¢çš„å®ä¾‹ä¸­`std::sort`å‡½æ•°ç¬¬ä¸‰ä¸ªå‚æ•°åº”è¯¥æ˜¯ä¼ é€’ä¸€ä¸ªæ’åºè§„åˆ™çš„**å‡½æ•°**ï¼Œä½†æ˜¯è¿™ä¸ªå®ä¾‹ä¸­ç›´æ¥å°†æ’åºå‡½æ•°çš„å®ç°å†™åœ¨åº”è¯¥ä¼ é€’å‡½æ•°çš„ä½ç½®ï¼Œçœå»äº†å®šä¹‰æ’åºå‡½æ•°çš„è¿‡ç¨‹ï¼Œå¯¹äºè¿™ç§ä¸éœ€è¦å¤ç”¨ï¼Œä¸”çŸ­å°çš„å‡½æ•°ï¼Œç›´æ¥ä¼ é€’å‡½æ•°ä½“å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚



# Lambdaè¡¨è¾¾å¼è¯­æ³•å®šä¹‰

<img src="/home/yuchen/å›¾ç‰‡/lamda.png" alt="lamda"  />

1. æ•è·åˆ—è¡¨ã€‚`[]`æ˜¯Lambdaå¼•å‡ºç¬¦ã€‚ç¼–è¯‘å™¨æ ¹æ®è¯¥å¼•å‡ºç¬¦åˆ¤æ–­æ¥ä¸‹æ¥çš„ä»£ç **æ˜¯å¦æ˜¯Lambdaå‡½æ•°**ï¼Œæ•è·åˆ—è¡¨èƒ½å¤Ÿæ•æ‰ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ä»¥ä¾›Lambdaå‡½æ•°ä½¿ç”¨ã€‚
2. å‚æ•°åˆ—è¡¨ã€‚**ä¸æ™®é€šå‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸€è‡´**ã€‚å¦‚æœä¸éœ€è¦å‚æ•°ä¼ é€’ï¼Œåˆ™å¯ä»¥è¿åŒæ‹¬å·â€œ()â€ä¸€èµ·çœç•¥ã€‚
3. å¯å˜è§„æ ¼ã€‚`mutable`ä¿®é¥°ç¬¦ï¼Œ é»˜è®¤æƒ…å†µä¸‹Lambdaå‡½æ•°æ€»æ˜¯ä¸€ä¸ª`const`å‡½æ•°ï¼Œ`mutable`å¯ä»¥å–æ¶ˆå…¶å¸¸é‡æ€§ã€‚åœ¨ä½¿ç”¨è¯¥ä¿®é¥°ç¬¦æ—¶ï¼Œå‚æ•°åˆ—è¡¨ä¸å¯çœç•¥ï¼ˆå³ä½¿å‚æ•°ä¸ºç©ºï¼‰ã€‚
4. å¼‚å¸¸è¯´æ˜ã€‚ç”¨äºLamdbaè¡¨è¾¾å¼å†…éƒ¨å‡½æ•°**æŠ›å‡ºå¼‚å¸¸**ã€‚
5. è¿”å›ç±»å‹ã€‚ è¿½è¸ªè¿”å›ç±»å‹å½¢å¼å£°æ˜å‡½æ•°çš„è¿”å›ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸éœ€è¦è¿”å›å€¼çš„æ—¶å€™ä¹Ÿå¯ä»¥è¿åŒç¬¦å·â€->â€ä¸€èµ·çœç•¥ã€‚æ­¤å¤–ï¼Œåœ¨è¿”å›ç±»å‹æ˜ç¡®çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥çœç•¥è¯¥éƒ¨åˆ†ï¼Œè®©ç¼–è¯‘å™¨å¯¹è¿”å›ç±»å‹è¿›è¡Œæ¨å¯¼ã€‚
6. lambdaå‡½æ•°ä½“ã€‚å†…å®¹ä¸æ™®é€šå‡½æ•°ä¸€æ ·ï¼Œä¸è¿‡é™¤äº†å¯ä»¥ä½¿ç”¨å‚æ•°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ‰€æœ‰æ•è·çš„å˜é‡ã€‚





# Lambdaè¡¨è¾¾å¼å‚æ•°è¯¦è§£

# Lambdaæ•è·åˆ—è¡¨

> Lambdaè¡¨è¾¾å¼ä¸æ™®é€šå‡½æ•°æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨å‚æ•°ä»¥å¤–ï¼ŒLambdaå‡½æ•°è¿˜å¯ä»¥é€šè¿‡æ•è·åˆ—è¡¨è®¿é—®ä¸€äº›ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ã€‚
>
> å…·ä½“åœ°ï¼Œæ•æ‰åˆ—è¡¨æè¿°äº†ä¸Šä¸‹æ–‡ä¸­å“ªäº›æ•°æ®å¯ä»¥è¢«Lambdaä½¿ç”¨ï¼Œä»¥åŠä½¿ç”¨æ–¹å¼ï¼ˆä»¥å€¼ä¼ é€’çš„æ–¹å¼æˆ–å¼•ç”¨ä¼ é€’çš„æ–¹å¼ï¼‰ã€‚è¯­æ³•ä¸Šï¼Œåœ¨â€œ`[]`â€åŒ…æ‹¬èµ·æ¥çš„æ˜¯æ•è·åˆ—è¡¨ï¼Œæ•è·åˆ—è¡¨ç”±å¤šä¸ªæ•è·é¡¹ç»„æˆï¼Œå¹¶ä»¥é€—å·åˆ†éš”ã€‚æ•è·åˆ—è¡¨æœ‰ä»¥ä¸‹å‡ ç§å½¢å¼ï¼š

- `[]`è¡¨ç¤ºä¸æ•è·ä»»ä½•å˜é‡

```cpp
auto function = ([]{
		std::cout << "Hello World!" << std::endl;
	}
);

function();
```

- `[var]`è¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•è·å˜é‡`var`

```cpp
int num = 100;
auto function = ([num]{
		std::cout << num << std::endl;
	}
);

function();
```

- `[=]`è¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•è·æ‰€æœ‰**çˆ¶ä½œç”¨åŸŸ**çš„å˜é‡ï¼ˆåŒ…æ‹¬`this`ï¼‰

```cpp
int index = 1;
int num = 100;
auto function = ([=]{
			std::cout << "index: "<< index << ", " 
                << "num: "<< num << std::endl;
	}
);

function();
```

- `[&var]`è¡¨ç¤º**å¼•ç”¨ä¼ é€’**æ•æ‰å˜é‡`var`

```cpp
int num = 100;
auto function = ([&num]{
		num = 1000;
		std::cout << "num: " << num << std::endl;
	}
);

function();
```

- `[&]`è¡¨ç¤ºå¼•ç”¨ä¼ é€’æ–¹å¼æ•æ‰æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„å˜é‡ï¼ˆåŒ…æ‹¬`this`ï¼‰

```cpp
int index = 1;
int num = 100;
auto function = ([&]{
		num = 1000;
		index = 2;
		std::cout << "index: "<< index << ", " 
            << "num: "<< num << std::endl;
	}
);

function();
```

- `[this]`è¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•æ‰å½“å‰çš„`this`æŒ‡é’ˆ

```cpp
#include <iostream>
using namespace std;
 
class Lambda
{
public:
    void sayHello() {
        std::cout << "Hello" << std::endl;
    };

    void lambda() {
        auto function = [this]{ 
            this->sayHello(); 
        };

        function();
    }
};
 
int main()
{
    Lambda demo;
    demo.lambda();
}
```

- `[=, &]`

   æ‹·è´ä¸å¼•ç”¨æ··åˆ   

  - `[=, &a, &b]`è¡¨ç¤ºä»¥å¼•ç”¨ä¼ é€’çš„æ–¹å¼æ•æ‰å˜é‡`a`å’Œ`b`ï¼Œä»¥å€¼ä¼ é€’æ–¹å¼æ•æ‰å…¶å®ƒæ‰€æœ‰å˜é‡ã€‚

```cpp
int index = 1;
int num = 100;
auto function = ([=, &index, &num]{
		num = 1000;
		index = 2;
		std::cout << "index: "<< index << ", " 
            << "num: "<< num << std::endl;
	}
);

function();
1234567891011
```



- `[&, a, this]`è¡¨ç¤ºä»¥å€¼ä¼ é€’çš„æ–¹å¼æ•æ‰å˜é‡`a`å’Œ`this`ï¼Œå¼•ç”¨ä¼ é€’æ–¹å¼æ•æ‰å…¶å®ƒæ‰€æœ‰å˜é‡ã€‚



ä¸è¿‡å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ•æ‰åˆ—è¡¨**ä¸å…è®¸å˜é‡é‡å¤ä¼ é€’**ã€‚ä¸‹é¢ä¸€äº›ä¾‹å­å°±æ˜¯å…¸å‹çš„é‡å¤ï¼Œä¼šå¯¼è‡´ç¼–è¯‘æ—¶æœŸçš„é”™è¯¯ã€‚ä¾‹å¦‚ï¼š

- `[=,a]`è¿™é‡Œå·²ç»ä»¥å€¼ä¼ é€’æ–¹å¼æ•æ‰äº†æ‰€æœ‰å˜é‡ï¼Œä½†æ˜¯é‡å¤æ•æ‰`a`äº†ï¼Œä¼šæŠ¥é”™çš„ï¼›
- `[&,&this]`è¿™é‡Œ`&`å·²ç»ä»¥å¼•ç”¨ä¼ é€’æ–¹å¼æ•æ‰äº†æ‰€æœ‰å˜é‡ï¼Œå†æ•æ‰`this`ä¹Ÿæ˜¯ä¸€ç§é‡å¤ã€‚

å¦‚æœLambdaä¸»ä½“`total`é€šè¿‡å¼•ç”¨è®¿é—®å¤–éƒ¨å˜é‡ï¼Œå¹¶`factor`é€šè¿‡å€¼è®¿é—®å¤–éƒ¨å˜é‡ï¼Œåˆ™ä»¥ä¸‹æ•è·å­å¥æ˜¯ç­‰æ•ˆçš„ï¼š

```cpp
[&total, factor]
[factor, &total]
[&, factor]
[factor, &]
[=, &total]
[&total, =]
```



# Lambdaå‚æ•°åˆ—è¡¨

> é™¤äº†æ•è·åˆ—è¡¨ä¹‹å¤–ï¼ŒLambdaè¿˜å¯ä»¥æ¥å—è¾“å…¥å‚æ•°ã€‚å‚æ•°åˆ—è¡¨æ˜¯å¯é€‰çš„ï¼Œå¹¶ä¸”åœ¨å¤§å¤šæ•°æ–¹é¢ç±»ä¼¼äºå‡½æ•°çš„å‚æ•°åˆ—è¡¨ã€‚

```cpp
auto function = [] (int first, int second){
    return first + second;
};
	
function(100, 200);
```



# å¯å˜è§„æ ¼mutable

`mutable`ä¿®é¥°ç¬¦ï¼Œ é»˜è®¤æƒ…å†µä¸‹Lambdaå‡½æ•°æ€»æ˜¯ä¸€ä¸ª`const`å‡½æ•°ï¼Œ`mutable`å¯ä»¥å–æ¶ˆå…¶å¸¸é‡æ€§ã€‚åœ¨ä½¿ç”¨è¯¥ä¿®é¥°ç¬¦æ—¶ï¼Œå‚æ•°åˆ—è¡¨ä¸å¯çœç•¥ï¼ˆå³ä½¿å‚æ•°ä¸ºç©ºï¼‰ã€‚

```cpp
#include <iostream>
using namespace std;

int main()
{
   int m = 0;
   int n = 0;
   [&, n] (int a) mutable { m = ++n + a; }(4);
   cout << m << endl << n << endl;
}
12345678910
```



# å¼‚å¸¸è¯´æ˜

ä½ å¯ä»¥ä½¿ç”¨ `throw()` å¼‚å¸¸è§„èŒƒæ¥æŒ‡ç¤º Lambda è¡¨è¾¾å¼ä¸ä¼šå¼•å‘ä»»ä½•å¼‚å¸¸ã€‚ä¸æ™®é€šå‡½æ•°ä¸€æ ·ï¼Œå¦‚æœ Lambda è¡¨è¾¾å¼å£°æ˜ C4297 å¼‚å¸¸è§„èŒƒä¸” Lambda ä½“å¼•å‘å¼‚å¸¸ï¼ŒVisual C++ ç¼–è¯‘å™¨å°†ç”Ÿæˆè­¦å‘Š `throw()` ã€‚

```cpp
int main() // C4297 expected 
{ 
 	[]() throw() { throw 5; }(); 
}
```

åœ¨MSDNçš„å¼‚å¸¸è§„èŒƒä¸­ï¼Œæ˜ç¡®æŒ‡å‡ºå¼‚å¸¸è§„èŒƒæ˜¯åœ¨ C++11 ä¸­å¼ƒç”¨çš„ C++ è¯­è¨€åŠŸèƒ½ã€‚å› æ­¤è¿™é‡Œä¸å»ºè®®ä¸å»ºè®®å¤§å®¶ä½¿ç”¨ã€‚



# è¿”å›ç±»å‹

Lambdaè¡¨è¾¾å¼çš„**è¿”å›ç±»å‹ä¼šè‡ªåŠ¨æ¨å¯¼**ã€‚é™¤éä½ æŒ‡å®šäº†è¿”å›ç±»å‹ï¼Œå¦åˆ™ä¸å¿…ä½¿ç”¨å…³é”®å­—ã€‚è¿”å›å‹ç±»ä¼¼äºé€šå¸¸çš„æ–¹æ³•æˆ–å‡½æ•°çš„è¿”å›å‹éƒ¨åˆ†ã€‚ä½†æ˜¯ï¼Œè¿”å›ç±»å‹å¿…é¡»åœ¨å‚æ•°åˆ—è¡¨ä¹‹åï¼Œå¹¶ä¸”å¿…é¡»åœ¨è¿”å›ç±»å‹->ä¹‹å‰åŒ…å«ç±»å‹å…³é”®å­—ã€‚å¦‚æœLambdaä¸»ä½“ä»…åŒ…å«ä¸€ä¸ª`return`è¯­å¥æˆ–è¯¥è¡¨è¾¾å¼æœªè¿”å›å€¼ï¼Œåˆ™å¯ä»¥çœç•¥Lambdaè¡¨è¾¾å¼çš„`return-type`éƒ¨åˆ†ã€‚**å¦‚æœLambdaä¸»ä½“åŒ…å«ä¸€ä¸ª`return`è¯­å¥ï¼Œåˆ™ç¼–è¯‘å™¨å°†ä»`return`è¡¨è¾¾å¼çš„ç±»å‹ä¸­æ¨æ–­å‡º`return`ç±»å‹**ã€‚å¦åˆ™ï¼Œç¼–è¯‘å™¨å°†è¿”å›ç±»å‹æ¨å¯¼ä¸º`void`ã€‚

```cpp
auto x1 = [](int i){ return i; };
```





# Lambdaå‡½æ•°ä½“

Lambdaè¡¨è¾¾å¼çš„Lambdaä¸»ä½“ï¼ˆæ ‡å‡†è¯­æ³•ä¸­çš„å¤åˆè¯­å¥ï¼‰å¯ä»¥åŒ…å«æ™®é€šæ–¹æ³•æˆ–å‡½æ•°çš„ä¸»ä½“å¯ä»¥åŒ…å«çš„ä»»ä½•å†…å®¹ã€‚æ™®é€šå‡½æ•°å’ŒLambdaè¡¨è¾¾å¼çš„ä¸»ä½“éƒ½å¯ä»¥è®¿é—®ä»¥ä¸‹ç±»å‹çš„å˜é‡ï¼š

- æ•è·å˜é‡
- å½¢å‚å˜é‡
- å±€éƒ¨å£°æ˜çš„å˜é‡
- ç±»æ•°æ®æˆå‘˜ï¼Œå½“åœ¨ç±»å†…å£°æ˜`this`å¹¶è¢«æ•è·æ—¶
- å…·æœ‰é™æ€å­˜å‚¨æŒç»­æ—¶é—´çš„ä»»ä½•å˜é‡ï¼Œä¾‹å¦‚å…¨å±€å˜é‡

```cpp
#include <iostream>
using namespace std;

int main()
{
   int m = 0;
   int n = 0;
   [&, n] (int a) mutable { m = ++n + a; }(4);
   cout << m << endl << n << endl;
}
```







# Lambdaè¡¨è¾¾å¼çš„ä¼˜ç¼ºç‚¹

# Lambdaè¡¨è¾¾å¼çš„ä¼˜ç‚¹

- å¯ä»¥ç›´æ¥åœ¨éœ€è¦è°ƒç”¨å‡½æ•°çš„ä½ç½®å®šä¹‰**çŸ­å°ç²¾æ‚çš„å‡½æ•°**ï¼Œè€Œä¸éœ€è¦é¢„å…ˆå®šä¹‰å¥½å‡½æ•°

```cpp
std::find_if(v.begin(), v.end(), [](int& item){return item > 2});
1
```

- ä½¿ç”¨Lamdbaè¡¨è¾¾å¼å˜å¾—æ›´åŠ ç´§å‡‘ï¼Œ**ç»“æ„å±‚æ¬¡æ›´åŠ æ˜æ˜¾ã€ä»£ç å¯è¯»æ€§æ›´å¥½**

# Lambdaè¡¨è¾¾å¼çš„ç¼ºç‚¹

- Lamdbaè¡¨è¾¾å¼è¯­æ³•æ¯”è¾ƒçµæ´»ï¼Œå¢åŠ äº†é˜…è¯»ä»£ç çš„éš¾åº¦
- å¯¹äºå‡½æ•°å¤ç”¨æ— èƒ½ä¸ºåŠ›

---

## ğŸ“š æ‰©å±•é˜…è¯»

### å®˜æ–¹æ–‡æ¡£
- [ç›¸å…³å®˜æ–¹æ–‡æ¡£é“¾æ¥]()

### å­¦ä¹ èµ„æº
- [æ¨èæ•™ç¨‹]()
- [ç¤ºä¾‹ä»£ç ]()

### å¸¸è§é—®é¢˜
1. **é—®é¢˜æè¿°**
   è§£å†³æ–¹æ¡ˆ

## ğŸ› ï¸ å®è·µå»ºè®®

1. **å­¦ä¹ è·¯å¾„**
2. **å®è·µé¡¹ç›®**
3. **è°ƒè¯•æŠ€å·§**

> æœ€åæ›´æ–°: 2026-02-27 | ç”±OpenClawä¼˜åŒ–
